# ğŸ—ï¸ Arquitetura do Sistema - AutoTarefas

**VersÃ£o:** 1.0
**Data:** Dezembro 2025
**Status:** Aprovado

---

## 1. VisÃ£o Geral

### 1.1 Estilo Arquitetural

O AutoTarefas segue uma **Arquitetura em Camadas (Layered Architecture)** combinada com **Arquitetura Modular**, onde cada funcionalidade Ã© encapsulada em mÃ³dulos independentes que se comunicam atravÃ©s de interfaces bem definidas.

### 1.2 PrincÃ­pios de Design

| PrincÃ­pio | AplicaÃ§Ã£o |
|-----------|-----------|
| **SeparaÃ§Ã£o de Responsabilidades** | Cada mÃ³dulo tem uma Ãºnica responsabilidade |
| **InversÃ£o de DependÃªncia** | MÃ³dulos dependem de abstraÃ§Ãµes (BaseTask) |
| **ComposiÃ§Ã£o sobre HeranÃ§a** | Tasks sÃ£o compostas, nÃ£o herdadas em cadeia |
| **Fail-Safe** | OperaÃ§Ãµes destrutivas exigem confirmaÃ§Ã£o |
| **ConfiguraÃ§Ã£o Externa** | ParÃ¢metros em .env e config files |

---

## 2. Diagrama de Camadas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CAMADA DE APRESENTAÃ‡ÃƒO                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                         CLI (Click)                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ backup  â”‚ â”‚ clean   â”‚ â”‚ monitor â”‚ â”‚schedule â”‚ â”‚ email  â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚    â”‚
â”‚  â”‚  â”‚organize â”‚ â”‚ report  â”‚ â”‚  init   â”‚                        â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              Rich (UI)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CAMADA DE NEGÃ“CIO                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          TASKS                                â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ BackupTask â”‚ â”‚CleanerTask â”‚ â”‚MonitorTask â”‚ â”‚OrganizerTaskâ”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚   â”‚
â”‚  â”‚  â”‚ReporterTaskâ”‚ â”‚SalesReport â”‚                               â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           CAMADA CORE                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  BaseTask   â”‚ â”‚  Scheduler  â”‚ â”‚   Email     â”‚ â”‚  Notifier   â”‚    â”‚
â”‚  â”‚ TaskResult  â”‚ â”‚ TaskRegistryâ”‚ â”‚ EmailSender â”‚ â”‚             â”‚    â”‚
â”‚  â”‚ TaskStatus  â”‚ â”‚ ScheduledJobâ”‚ â”‚ EmailMsg    â”‚ â”‚             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   Logger    â”‚ â”‚   Config    â”‚ â”‚   Storage   â”‚                    â”‚
â”‚  â”‚  (Loguru)   â”‚ â”‚  (Settings) â”‚ â”‚  JobStore   â”‚                    â”‚
â”‚  â”‚             â”‚ â”‚             â”‚ â”‚ RunHistory  â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CAMADA DE UTILITÃRIOS                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        utils/helpers.py                      â”‚    â”‚
â”‚  â”‚  â€¢ format_size()      â€¢ ensure_dir()      â€¢ safe_path()     â”‚    â”‚
â”‚  â”‚  â€¢ human_time()       â€¢ hash_file()       â€¢ is_safe_path()  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       CAMADA DE INFRAESTRUTURA                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Sistema   â”‚ â”‚   SMTP    â”‚ â”‚  SQLite/  â”‚ â”‚  Sistema  â”‚           â”‚
â”‚  â”‚ Arquivos  â”‚ â”‚  Server   â”‚ â”‚   JSON    â”‚ â”‚Operacionalâ”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Diagrama de Componentes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 AutoTarefas                                  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                              CLI Module                               â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚   main.py â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚                 â”‚                                              â”‚     â”‚   â”‚
â”‚  â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚     â”‚   â”‚
â”‚  â”‚        â–¼                 â–¼                                     â–¼     â”‚   â”‚
â”‚  â”‚   commands/         commands/                             commands/  â”‚   â”‚
â”‚  â”‚   backup.py         cleaner.py    ...more...              email.py   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”‚                 â”‚                                     â”‚         â”‚
â”‚           â–¼                 â–¼                                     â–¼         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                            Tasks Module                              â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚   backup    â”‚  â”‚   cleaner   â”‚  â”‚   monitor   â”‚  â”‚  organizer  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   .py       â”‚  â”‚   .py       â”‚  â”‚   .py       â”‚  â”‚   .py       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚â€¢ BackupTask â”‚  â”‚â€¢ CleanerTaskâ”‚  â”‚â€¢ MonitorTaskâ”‚  â”‚â€¢ Organizer  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚â€¢ RestoreTaskâ”‚  â”‚â€¢ Profiles   â”‚  â”‚â€¢ Metrics    â”‚  â”‚  Task       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚â€¢ Manager    â”‚  â”‚â€¢ Reporter   â”‚  â”‚â€¢ History    â”‚  â”‚â€¢ UndoTask   â”‚ â”‚   â”‚
â”‚  â”‚  â”‚â€¢ Compress   â”‚  â”‚â€¢ TrashMgr   â”‚  â”‚â€¢ Dashboard  â”‚  â”‚â€¢ Journal    â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚                â”‚                â”‚                â”‚             â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                      â”‚                                       â”‚
â”‚                                      â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                             Core Module                              â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚   base.py   â”‚  â”‚ scheduler.pyâ”‚  â”‚  email.py   â”‚  â”‚ notifier.py â”‚ â”‚   â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ BaseTask  â”‚  â”‚ â€¢ Scheduler â”‚  â”‚ â€¢ EmailMsg  â”‚  â”‚ â€¢ Notifier  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ TaskResultâ”‚  â”‚ â€¢ Registry  â”‚  â”‚ â€¢ Sender    â”‚  â”‚ â€¢ Templates â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ TaskStatusâ”‚  â”‚ â€¢ Job       â”‚  â”‚ â€¢ Priority  â”‚  â”‚             â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                          â”‚                                           â”‚   â”‚
â”‚  â”‚                          â–¼                                           â”‚   â”‚
â”‚  â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚   â”‚
â”‚  â”‚                   â”‚  storage/   â”‚                                    â”‚   â”‚
â”‚  â”‚                   â”‚             â”‚                                    â”‚   â”‚
â”‚  â”‚                   â”‚ â€¢ JobStore  â”‚                                    â”‚   â”‚
â”‚  â”‚                   â”‚ â€¢ RunHistoryâ”‚                                    â”‚   â”‚
â”‚  â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚   â”‚
â”‚  â”‚  â”‚  logger.py  â”‚  â”‚  config.py  â”‚                                   â”‚   â”‚
â”‚  â”‚  â”‚  (Loguru)   â”‚  â”‚  (Settings) â”‚                                   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Diagrama de Classes (Core)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              CLASSES ABSTRATAS                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          <<abstract>>           â”‚
    â”‚           BaseTask              â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ + name: str                     â”‚
    â”‚ + description: str              â”‚
    â”‚ + config: dict                  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ + run() -> TaskResult           â”‚  â†â”€â”€ Abstract method
    â”‚ + validate() -> bool            â”‚
    â”‚ + on_success(result)            â”‚
    â”‚ + on_failure(error)             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ extends
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼           â–¼           â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BackupTask  â”‚ â”‚Cleaner  â”‚ â”‚ MonitorTask â”‚ â”‚OrganizerTaskâ”‚ â”‚ReporterTask â”‚
â”‚             â”‚ â”‚  Task   â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚+ source     â”‚ â”‚+ targetsâ”‚ â”‚+ interval   â”‚ â”‚+ source_dir â”‚ â”‚+ template   â”‚
â”‚+ dest       â”‚ â”‚+ profileâ”‚ â”‚+ thresholds â”‚ â”‚+ profile    â”‚ â”‚+ data       â”‚
â”‚+ compress   â”‚ â”‚+ dry_runâ”‚ â”‚             â”‚ â”‚+ dry_run    â”‚ â”‚             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚+ run()      â”‚ â”‚+ run()  â”‚ â”‚+ run()      â”‚ â”‚+ run()      â”‚ â”‚+ run()      â”‚
â”‚+ restore()  â”‚ â”‚+ scan() â”‚ â”‚+ collect()  â”‚ â”‚+ preview()  â”‚ â”‚+ generate() â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              DATA CLASSES                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     <<dataclass>>       â”‚     â”‚       <<enum>>          â”‚
â”‚      TaskResult         â”‚     â”‚      TaskStatus         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + success: bool         â”‚     â”‚ PENDING                 â”‚
â”‚ + status: TaskStatus    â”‚     â”‚ RUNNING                 â”‚
â”‚ + message: str          â”‚     â”‚ SUCCESS                 â”‚
â”‚ + data: dict            â”‚     â”‚ FAILED                  â”‚
â”‚ + duration: float       â”‚     â”‚ CANCELLED               â”‚
â”‚ + timestamp: datetime   â”‚     â”‚ SKIPPED                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     <<dataclass>>       â”‚     â”‚       <<enum>>          â”‚
â”‚     ScheduledJob        â”‚     â”‚     ScheduleType        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + id: str               â”‚     â”‚ INTERVAL                â”‚
â”‚ + name: str             â”‚     â”‚ DAILY                   â”‚
â”‚ + task_type: str        â”‚     â”‚ WEEKLY                  â”‚
â”‚ + task_config: dict     â”‚     â”‚ MONTHLY                 â”‚
â”‚ + schedule_type: enum   â”‚     â”‚ CRON                    â”‚
â”‚ + schedule_config: dict â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ + enabled: bool         â”‚
â”‚ + last_run: datetime    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ + next_run: datetime    â”‚     â”‚       <<enum>>          â”‚
â”‚ + run_count: int        â”‚     â”‚       JobStatus         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                â”‚ ACTIVE                  â”‚
                                â”‚ PAUSED                  â”‚
                                â”‚ DISABLED                â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Fluxo de ExecuÃ§Ã£o

### 5.1 Fluxo de Comando CLI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚    â”‚   CLI    â”‚    â”‚  Command â”‚    â”‚   Task   â”‚    â”‚  Result  â”‚
â”‚ Terminal â”‚    â”‚  main.py â”‚    â”‚  Handler â”‚    â”‚  Class   â”‚    â”‚  Output  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚               â”‚               â”‚               â”‚
     â”‚ autotarefas   â”‚               â”‚               â”‚               â”‚
     â”‚ backup run    â”‚               â”‚               â”‚               â”‚
     â”‚ /home/docs    â”‚               â”‚               â”‚               â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚ parse args    â”‚               â”‚               â”‚
     â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚ validate()    â”‚               â”‚
     â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚ BackupTask()  â”‚               â”‚
     â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚    run()      â”‚               â”‚
     â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚ TaskResult    â”‚
     â”‚               â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚ format output â”‚               â”‚
     â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚               â”‚               â”‚               â”‚               â”‚
     â”‚ âœ… Backup     â”‚               â”‚               â”‚               â”‚
     â”‚ completed     â”‚               â”‚               â”‚               â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚               â”‚               â”‚               â”‚               â”‚
```

### 5.2 Fluxo do Scheduler

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Scheduler â”‚   â”‚  JobStore â”‚   â”‚  Registry â”‚   â”‚   Task    â”‚   â”‚RunHistory â”‚
â”‚   Loop    â”‚   â”‚           â”‚   â”‚           â”‚   â”‚           â”‚   â”‚           â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚               â”‚               â”‚               â”‚               â”‚
      â”‚ load_jobs()   â”‚               â”‚               â”‚               â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚               â”‚
      â”‚               â”‚               â”‚               â”‚               â”‚
      â”‚  [jobs]       â”‚               â”‚               â”‚               â”‚
      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚               â”‚               â”‚
      â”‚               â”‚               â”‚               â”‚               â”‚
      â”‚         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”         â”‚               â”‚               â”‚
      â”‚         â”‚  foreach  â”‚         â”‚               â”‚               â”‚
      â”‚         â”‚   job     â”‚         â”‚               â”‚               â”‚
      â”‚         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â”‚               â”‚               â”‚
      â”‚               â”‚               â”‚               â”‚               â”‚
      â”‚ if job.is_due()               â”‚               â”‚               â”‚
      â”‚               â”‚               â”‚               â”‚               â”‚
      â”‚ get_task(type)â”‚               â”‚               â”‚               â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚
      â”‚               â”‚               â”‚               â”‚               â”‚
      â”‚               â”‚  TaskClass    â”‚               â”‚               â”‚
      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚               â”‚
      â”‚               â”‚               â”‚               â”‚               â”‚
      â”‚ task.run(config)              â”‚               â”‚               â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
      â”‚               â”‚               â”‚               â”‚               â”‚
      â”‚               â”‚               â”‚  TaskResult   â”‚               â”‚
      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚
      â”‚               â”‚               â”‚               â”‚               â”‚
      â”‚ save_run(job, result)         â”‚               â”‚               â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
      â”‚               â”‚               â”‚               â”‚               â”‚
      â”‚ update_job()  â”‚               â”‚               â”‚               â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚               â”‚
      â”‚               â”‚               â”‚               â”‚               â”‚
```

---

## 6. Interfaces e Contratos

### 6.1 Interface BaseTask

```python
from abc import ABC, abstractmethod
from dataclasses import dataclass
from enum import Enum
from typing import Any, Dict, Optional
from datetime import datetime


class TaskStatus(Enum):
    PENDING = "pending"
    RUNNING = "running"
    SUCCESS = "success"
    FAILED = "failed"
    CANCELLED = "cancelled"
    SKIPPED = "skipped"


@dataclass
class TaskResult:
    success: bool
    status: TaskStatus
    message: str
    data: Dict[str, Any] = None
    duration: float = 0.0
    timestamp: datetime = None

    def __post_init__(self):
        if self.timestamp is None:
            self.timestamp = datetime.now()
        if self.data is None:
            self.data = {}


class BaseTask(ABC):
    """Classe base abstrata para todas as tasks."""

    def __init__(self, name: str, description: str = "", **config):
        self.name = name
        self.description = description
        self.config = config
        self._start_time: Optional[datetime] = None

    @abstractmethod
    def run(self) -> TaskResult:
        """Executa a task. Deve ser implementado pelas subclasses."""
        pass

    def validate(self) -> bool:
        """Valida configuraÃ§Ãµes antes da execuÃ§Ã£o."""
        return True

    def on_success(self, result: TaskResult) -> None:
        """Hook chamado apÃ³s execuÃ§Ã£o bem-sucedida."""
        pass

    def on_failure(self, error: Exception) -> None:
        """Hook chamado apÃ³s falha na execuÃ§Ã£o."""
        pass
```

### 6.2 Interface Scheduler

```python
from typing import Callable, Dict, List, Optional, Type


class TaskRegistry:
    """Registro central de tipos de tasks disponÃ­veis."""

    _tasks: Dict[str, Type[BaseTask]] = {}

    @classmethod
    def register(cls, name: str) -> Callable:
        """Decorator para registrar uma task."""
        def decorator(task_class: Type[BaseTask]) -> Type[BaseTask]:
            cls._tasks[name] = task_class
            return task_class
        return decorator

    @classmethod
    def get(cls, name: str) -> Optional[Type[BaseTask]]:
        """Retorna a classe da task pelo nome."""
        return cls._tasks.get(name)

    @classmethod
    def list_all(cls) -> List[str]:
        """Lista todos os tipos de tasks registrados."""
        return list(cls._tasks.keys())


class Scheduler:
    """Gerenciador de agendamento de tarefas."""

    def add_job(self, job: ScheduledJob) -> str:
        """Adiciona um novo job ao scheduler."""
        pass

    def remove_job(self, job_id: str) -> bool:
        """Remove um job do scheduler."""
        pass

    def pause_job(self, job_id: str) -> bool:
        """Pausa um job."""
        pass

    def resume_job(self, job_id: str) -> bool:
        """Retoma um job pausado."""
        pass

    def run_job(self, job_id: str) -> TaskResult:
        """Executa um job imediatamente."""
        pass

    def start(self, blocking: bool = True) -> None:
        """Inicia o loop do scheduler."""
        pass

    def stop(self) -> None:
        """Para o scheduler."""
        pass
```

---

## 7. PadrÃµes de Design Utilizados

| PadrÃ£o | Onde Ã© Usado | PropÃ³sito |
|--------|--------------|-----------|
| **Template Method** | BaseTask.run() | Define esqueleto do algoritmo |
| **Factory** | TaskRegistry.get() | Cria instÃ¢ncias de tasks |
| **Singleton** | get_scheduler(), get_logger() | InstÃ¢ncia Ãºnica global |
| **Strategy** | CompressionType, CleaningProfiles | Algoritmos intercambiÃ¡veis |
| **Observer** | Notifier | NotificaÃ§Ã£o de eventos |
| **Command** | CLI commands | Encapsula requisiÃ§Ãµes |
| **Repository** | JobStore, RunHistory | Abstrai persistÃªncia |
| **Decorator** | @TaskRegistry.register | Registro declarativo |

---

## 8. Estrutura de Dados (PersistÃªncia)

### 8.1 Jobs (jobs.json)

```json
{
  "version": "1.0",
  "jobs": [
    {
      "id": "job_abc123",
      "name": "backup-diario",
      "task_type": "backup",
      "task_config": {
        "source": "/home/user/docs",
        "dest": "/backups",
        "compress": "zip"
      },
      "schedule_type": "daily",
      "schedule_config": {
        "time": "02:00"
      },
      "enabled": true,
      "created_at": "2024-12-01T10:00:00",
      "last_run": "2024-12-15T02:00:00",
      "next_run": "2024-12-16T02:00:00",
      "run_count": 15,
      "tags": ["backup", "importante"]
    }
  ]
}
```

### 8.2 HistÃ³rico de ExecuÃ§Ãµes (run_history.json)

```json
{
  "version": "1.0",
  "runs": [
    {
      "id": "run_xyz789",
      "job_id": "job_abc123",
      "job_name": "backup-diario",
      "started_at": "2024-12-15T02:00:00",
      "finished_at": "2024-12-15T02:05:30",
      "duration": 330.5,
      "status": "success",
      "result": {
        "files_copied": 150,
        "total_size": "2.5 GB",
        "backup_file": "/backups/backup_20241215.zip"
      },
      "error": null
    }
  ]
}
```

### 8.3 Organizer Journal (organize_journal.json)

```json
{
  "version": "1.0",
  "sessions": [
    {
      "id": "org_session_001",
      "timestamp": "2024-12-15T10:30:00",
      "source_dir": "/home/user/Downloads",
      "profile": "default",
      "moves": [
        {
          "from": "/home/user/Downloads/foto.jpg",
          "to": "/home/user/Downloads/Imagens/foto.jpg",
          "size": 2048576
        }
      ],
      "total_files": 25,
      "undone": false
    }
  ]
}
```

---

## 9. ConfiguraÃ§Ã£o do Sistema

### 9.1 VariÃ¡veis de Ambiente (.env)

```bash
# ===== GERAL =====
AUTOTAREFAS_ENV=development
AUTOTAREFAS_DEBUG=false
AUTOTAREFAS_DATA_DIR=~/.autotarefas

# ===== LOGGING =====
AUTOTAREFAS_LOG_LEVEL=INFO
AUTOTAREFAS_LOG_FILE=~/.autotarefas/logs/autotarefas.log
AUTOTAREFAS_LOG_ROTATION=10 MB
AUTOTAREFAS_LOG_RETENTION=30 days

# ===== EMAIL =====
AUTOTAREFAS_SMTP_HOST=smtp.gmail.com
AUTOTAREFAS_SMTP_PORT=587
AUTOTAREFAS_SMTP_USER=
AUTOTAREFAS_SMTP_PASSWORD=
AUTOTAREFAS_SMTP_FROM=
AUTOTAREFAS_SMTP_TLS=true

# ===== BACKUP =====
AUTOTAREFAS_BACKUP_DEFAULT_DEST=~/backups
AUTOTAREFAS_BACKUP_COMPRESSION=zip

# ===== SCHEDULER =====
AUTOTAREFAS_SCHEDULER_TICK=60
AUTOTAREFAS_SCHEDULER_PERSIST=true
```

### 9.2 Config Class

```python
from pathlib import Path
from pydantic_settings import BaseSettings


class Settings(BaseSettings):
    # Geral
    env: str = "development"
    debug: bool = False
    data_dir: Path = Path.home() / ".autotarefas"

    # Logging
    log_level: str = "INFO"
    log_file: Path = None
    log_rotation: str = "10 MB"
    log_retention: str = "30 days"

    # Email
    smtp_host: str = ""
    smtp_port: int = 587
    smtp_user: str = ""
    smtp_password: str = ""
    smtp_from: str = ""
    smtp_tls: bool = True

    # Backup
    backup_default_dest: Path = Path.home() / "backups"
    backup_compression: str = "zip"

    # Scheduler
    scheduler_tick: int = 60
    scheduler_persist: bool = True

    class Config:
        env_prefix = "AUTOTAREFAS_"
        env_file = ".env"
```

---

## 10. SeguranÃ§a

### 10.1 ValidaÃ§Ãµes de Caminho

```python
def is_safe_path(base_path: Path, target_path: Path) -> bool:
    """Previne path traversal attacks."""
    try:
        base = base_path.resolve()
        target = target_path.resolve()
        return str(target).startswith(str(base))
    except (OSError, ValueError):
        return False
```

### 10.2 SanitizaÃ§Ã£o de Logs

```python
SENSITIVE_PATTERNS = [
    r"password[=:]\s*\S+",
    r"api[_-]?key[=:]\s*\S+",
    r"secret[=:]\s*\S+",
    r"token[=:]\s*\S+",
]

def sanitize_log_message(message: str) -> str:
    """Remove dados sensÃ­veis de mensagens de log."""
    for pattern in SENSITIVE_PATTERNS:
        message = re.sub(pattern, "[REDACTED]", message, flags=re.IGNORECASE)
    return message
```

---

## 11. DecisÃµes Arquiteturais (ADRs)

### 11.1 ADR-001: Uso de Click para CLI

**Status:** Aceito
**Contexto:** Precisamos de um framework CLI robusto
**DecisÃ£o:** Usar Click em vez de argparse
**RazÃ£o:** Click oferece decorators intuitivos, auto-geraÃ§Ã£o de help, e integraÃ§Ã£o com Rich

### 11.2 ADR-002: PersistÃªncia em JSON

**Status:** Aceito
**Contexto:** Precisamos persistir jobs e histÃ³rico
**DecisÃ£o:** Usar JSON para v0.1, com possibilidade de SQLite futuro
**RazÃ£o:** JSON Ã© simples, legÃ­vel, e suficiente para o MVP

### 11.3 ADR-003: Loguru para Logging

**Status:** Aceito
**Contexto:** Sistema de logging flexÃ­vel
**DecisÃ£o:** Usar Loguru em vez de logging padrÃ£o
**RazÃ£o:** API mais simples, rotaÃ§Ã£o automÃ¡tica, serializaÃ§Ã£o JSON

### 11.4 ADR-004: Tasks como Classes

**Status:** Aceito
**Contexto:** Precisamos de tasks extensÃ­veis e testÃ¡veis
**DecisÃ£o:** Implementar tasks como classes herdando de BaseTask
**RazÃ£o:** Permite heranÃ§a, polimorfismo, e facilita testes unitÃ¡rios

---

## 12. Diagramas Mermaid (Para RenderizaÃ§Ã£o)

### 12.1 Diagrama de DependÃªncias

```mermaid
graph TD
    CLI[CLI Module] --> Tasks[Tasks Module]
    CLI --> Core[Core Module]
    Tasks --> Core
    Core --> Utils[Utils Module]
    Core --> Storage[Storage Module]

    subgraph CLI Module
        main[main.py]
        backup_cmd[backup.py]
        cleaner_cmd[cleaner.py]
        monitor_cmd[monitor.py]
        scheduler_cmd[scheduler.py]
    end

    subgraph Tasks Module
        BackupTask
        CleanerTask
        MonitorTask
        OrganizerTask
    end

    subgraph Core Module
        BaseTask
        Scheduler
        EmailSender
        Logger
        Config
    end
```

### 12.2 Ciclo de Vida de uma Task

```mermaid
stateDiagram-v2
    [*] --> PENDING: Task criada
    PENDING --> RUNNING: run() chamado
    RUNNING --> SUCCESS: ExecuÃ§Ã£o OK
    RUNNING --> FAILED: ExceÃ§Ã£o
    RUNNING --> CANCELLED: Cancelamento
    SUCCESS --> [*]
    FAILED --> [*]
    CANCELLED --> [*]
    PENDING --> SKIPPED: CondiÃ§Ã£o nÃ£o atendida
    SKIPPED --> [*]
```

---

## 13. HistÃ³rico de RevisÃµes

| VersÃ£o | Data | Autor | DescriÃ§Ã£o |
|--------|------|-------|-----------|
| 1.0 | Dez/2025 | - | VersÃ£o inicial aprovada |

---

*Documento gerado como parte da Fase 0.2 - Arquitetura do Sistema*
