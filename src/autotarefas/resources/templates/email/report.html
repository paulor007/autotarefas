<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>{{title}} - Relat√≥rio AutoTarefas</title>

  <style type="text/css">
    body, table, td, p, a { margin:0; padding:0; border:0; }
    body {
      width:100% !important;
      height:100% !important;
      background:#f4f4f7;
      font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      font-size:16px;
      line-height:1.6;
      color:#333333;
      -webkit-text-size-adjust:100%;
      -ms-text-size-adjust:100%;
    }
    table { border-collapse:collapse; }
    img { border:0; line-height:100%; outline:none; text-decoration:none; }

    .container { width:100%; max-width:700px; background:#ffffff; }
    .header {
      background:#4facfe;
      background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%);
      padding:30px 40px;
      text-align:center;
    }
    .header-title {
      color:#ffffff;
      font-size:26px;
      font-weight:600;
      margin:0;
    }
    .header-type {
      color:rgba(255,255,255,0.9);
      font-size:13px;
      margin-top:6px;
      text-transform:uppercase;
      letter-spacing:1px;
    }

    .content { padding:40px; }
    .section-title {
      font-size:18px;
      font-weight:600;
      color:#333333;
      margin:26px 0 12px 0;
      padding-bottom:10px;
      border-bottom:2px solid #e9ecef;
    }

    .summary-wrap { width:100%; margin-top:14px; }
    .card {
      background:#f8f9fa;
      border:1px solid #eef1f4;
      border-radius:10px;
    }
    .card-inner { padding:18px; text-align:center; }
    .card-value { font-size:30px; font-weight:700; line-height:1.1; }
    .card-label {
      font-size:12px;
      color:#666666;
      text-transform:uppercase;
      letter-spacing:.5px;
      margin-top:6px;
    }
    .c-success { color:#198754; }
    .c-warning { color:#ffc107; }
    .c-error   { color:#dc3545; }
    .c-info    { color:#0dcaf0; }

    .data-table { width:100%; margin:12px 0 0 0; font-size:14px; }
    .data-table th {
      background:#f8f9fa;
      padding:12px 14px;
      text-align:left;
      font-weight:600;
      color:#333333;
      border-bottom:2px solid #dee2e6;
    }
    .data-table td {
      padding:12px 14px;
      border-bottom:1px solid #e9ecef;
      color:#555555;
    }
    .text-right { text-align:right; }
    .text-center { text-align:center; }

    .badge {
      display:inline-block;
      padding:4px 10px;
      border-radius:999px;
      font-size:11px;
      font-weight:700;
      text-transform:uppercase;
    }
    .badge-success { background:#d1e7dd; color:#0f5132; }
    .badge-warning { background:#fff3cd; color:#664d03; }
    .badge-error   { background:#f8d7da; color:#842029; }
    .badge-info    { background:#cff4fc; color:#055160; }

    .meta-box {
      margin-top:24px;
      padding:16px;
      background:#f8f9fa;
      border-radius:10px;
      border:1px solid #eef1f4;
      font-size:13px;
      color:#666666;
    }
    .meta-table { width:100%; }
    .meta-table td { padding:6px 0; vertical-align:top; }
    .meta-k { width:40%; color:#666666; }
    .meta-v { width:60%; text-align:right; color:#333333; font-weight:600; }

    .footer {
      background:#f4f4f7;
      padding:26px 40px;
      text-align:center;
    }
    .footer p { color:#888888; font-size:13px; margin:0; }

    /* Mobile */
    @media screen and (max-width:600px){
      .content { padding:22px !important; }
      .header { padding:22px !important; }
      .stack { display:block !important; width:100% !important; }
      .stack-pad { padding:8px 0 !important; }
      .meta-v { text-align:left !important; }
    }
  </style>
</head>

<body>
  <!-- Preheader (opcional) -->
  <div style="display:none;max-height:0;overflow:hidden;opacity:0;color:transparent;">
    Relat√≥rio do AutoTarefas: {{title}}
  </div>

  <center>
    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="background:#f4f4f7;">
      <tr>
        <td style="padding:20px 0;">
          <table role="presentation" class="container" width="700" cellspacing="0" cellpadding="0" border="0" align="center" style="margin:0 auto;">
            <!-- Header -->
            <tr>
              <td class="header">
                <div class="header-type">üìä Relat√≥rio</div>
                <h1 class="header-title">{{title}}</h1>
              </td>
            </tr>

            <!-- Content -->
            <tr>
              <td class="content">
                <p style="font-size:16px;color:#555555;margin:0 0 18px 0;">
                  {{message}}
                </p>

                <!-- Summary Cards (4 col / stack no mobile) -->
                <table role="presentation" class="summary-wrap" width="100%" cellspacing="0" cellpadding="0" border="0">
                  <tr>
                    <td class="stack stack-pad" width="25%" style="padding:8px;">
                      <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" class="card">
                        <tr><td class="card-inner">
                          <div class="card-value c-success">{{success_count}}</div>
                          <div class="card-label">Sucesso</div>
                        </td></tr>
                      </table>
                    </td>

                    <td class="stack stack-pad" width="25%" style="padding:8px;">
                      <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" class="card">
                        <tr><td class="card-inner">
                          <div class="card-value c-warning">{{warning_count}}</div>
                          <div class="card-label">Avisos</div>
                        </td></tr>
                      </table>
                    </td>

                    <td class="stack stack-pad" width="25%" style="padding:8px;">
                      <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" class="card">
                        <tr><td class="card-inner">
                          <div class="card-value c-error">{{error_count}}</div>
                          <div class="card-label">Erros</div>
                        </td></tr>
                      </table>
                    </td>

                    <td class="stack stack-pad" width="25%" style="padding:8px;">
                      <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" class="card">
                        <tr><td class="card-inner">
                          <div class="card-value c-info">{{total_count}}</div>
                          <div class="card-label">Total</div>
                        </td></tr>
                      </table>
                    </td>
                  </tr>
                </table>

                <!-- Details -->
                <div class="section-title">üìã Detalhes</div>
                <table role="presentation" class="data-table" width="100%" cellspacing="0" cellpadding="0" border="0">
                  <thead>
                    <tr>
                      <th>Item</th>
                      <th>Status</th>
                      <th class="text-right">Valor</th>
                    </tr>
                  </thead>
                  <tbody>
                    {{table_rows}}
                  </tbody>
                </table>

                <!-- Data section (inject pronto no Python: "" ou HTML do bloco) -->
                {{data_section}}

                <!-- Meta -->
                <div class="meta-box">
                  <table role="presentation" class="meta-table" width="100%" cellspacing="0" cellpadding="0" border="0">
                    <tr>
                      <td class="meta-k">üè∑Ô∏è Origem:</td>
                      <td class="meta-v">{{source}}</td>
                    </tr>
                    <tr>
                      <td class="meta-k">üìÖ Data:</td>
                      <td class="meta-v">{{timestamp}}</td>
                    </tr>
                    <tr>
                      <td class="meta-k">üîñ Tags:</td>
                      <td class="meta-v">{{tags}}</td>
                    </tr>
                  </table>
                </div>

              </td>
            </tr>

            <!-- Footer -->
            <tr>
              <td class="footer">
                <p>
                  Relat√≥rio gerado automaticamente pelo <strong>AutoTarefas</strong>.<br>
                  Este email foi enviado para {{recipient}}.
                </p>
              </td>
            </tr>

          </table>
        </td>
      </tr>
    </table>
  </center>
</body>
</html>
